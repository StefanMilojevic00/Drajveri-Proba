/*
 * MQ9FlyingFish.c
 *
 *  Created on: Apr 11, 2024
 *      Author: Stefan.Milojevic
 */


#include "MQ9FlyingFish.h"

extern ADC_HandleTypeDef hadc3;

void MQ9_init(MQ9_t* MQ9, GPIO_TypeDef* gpioPort, uint16_t dataPin)
{
	MQ9->gpioPort = gpioPort;
	MQ9->dataPin = dataPin;
}

uint16_t MQ9_GetRawValue(MQ9_t* MQ9)
{
	HAL_ADC_Start(&hadc3);
	HAL_ADC_PollForConversion(&hadc3, HAL_MAX_DELAY);
	uint16_t raw = HAL_ADC_GetValue(&hadc3);
	return raw;
}


